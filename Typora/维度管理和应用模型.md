# 维度管理

## 维度相关的获取

```java
1.通过维度结构取 member 和 levelvalue
	IDimManager mgr = DimServiceGetter.getDimManager();
	DimHierarchy dhcust = mgr.getDimHierarchyByPK(dimhieraryPK);--- 获取维度结构
	List<DimMember> members = dhcust.getMemberReader().getMembers(); --- 获取该维度结构下的维度成员
	Map<String,String> map=new HashMap<>();
	//除"外系统客商"外
	for(DimMember dm:members){
		String levelValue = dm.getLevelValue().getTreeKey();
	}
	//外部系统客商--被投资方
	for(DimMember dm:members){
		map.put(dm.getLevelValue().getTreeKey(),(String)dm.getLevelValue().getPkCustInnerOrg());---获取外系统客商和内部单位的对应关系
	}
	
2.获取应用模型下维度结构
	ICubeBuildResultService cubeBuildResultService = ServiceLocator.find(ICubeBuildResultService.class);
	DimHierarchy dh = cubeBuildResultService.queryDimHierByPkDimDef(pk_cube, IDimDefPKConst.BM_CUST---维度结构的PK, CubeDimUsage.dimhier_type_member---成员视图);
	
	第二种法子
	CubeDef cube = ?;
	cube.getDimHierarchy(dimhierPk);
	
	
3.根据应用模型的PK获取应用模型的定义
	ICubeDefQueryService service = NCLocator.getInstance().lookup(ICubeDefQueryService.class);
	CubeDef cube = null;
	try {
		cube = service.queryCubeDefByPK(pk_cube);
	} catch (BusinessException e) {
		NtbLogger.error(e);
	}
4.结构视图 转 成员视图
	DimManagerUtil.getMemberLevelValueFromStrLevelValue()
```



# 应用模型